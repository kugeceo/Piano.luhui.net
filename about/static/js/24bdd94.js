/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{0:function(t,e,n){"use strict";n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return d})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return f})),n.d(e,"e",(function(){return _}));var r=n(40),o=n(5);function c(t,e){return"value"===t||Object(r.d)(e)||Object(r.c)(e)||Object(r.a)(e)}function h(t,...e){if(!e.length)return t;const source=e.shift();if(Object(o.g)(t)&&Object(o.g)(source))for(const e in source)c(e,source[e])?t[e]=source[e]:Object(o.g)(source[e])?(t[e]||Object.assign(t,{[e]:{}}),h(t[e],source[e])):Object.assign(t,{[e]:source[e]});return h(t,...e)}function l(t,e){return t.length===e.length&&t.every(((element,t)=>e[t]===element))}function d(t,e,n=[],r){const c={},l=Array.from(e);if(Object(o.g)(l[0])&&r&&!Reflect.has(l[0],r)){Object.keys(l[0]).some((e=>Reflect.has(t,e)))||(h(c,{[r]:l[0]}),n.splice(n.indexOf(r),1),l.shift())}if(1===l.length&&Object(o.g)(l[0]))h(c,l[0]);else for(let i=0;i<n.length;i++)Object(o.c)(l[i])&&(c[n[i]]=l[i]);return h(t,c)}function m(t){return t.constructor.getDefaults()}function f(t,e){return Object(o.i)(t)?e:t}function _(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}},100:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(32);var r=n(28),o=n(121);class c extends o.b{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Object(r.e)()}static set A4(t){Object(r.h)(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:c.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=h[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:c.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,q,s){let e=1;return t&&"0"!==t&&(e*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),q&&"0"!==q&&(e*=this._beatsToUnits(parseFloat(q))),s&&"0"!==s&&(e*=this._beatsToUnits(parseFloat(s)/4)),e}}})}transpose(t){return new c(this.context,this.valueOf()*Object(r.f)(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Object(r.b)(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/c.A4);let n=Math.round(12*e)+57;const r=Math.floor(n/12);r<0&&(n+=-12*r);return l[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Object(r.g)(t)}static ftom(t){return Object(r.b)(t)}}const h={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]},102:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return d}));const r=[];function o(t){r.push(t)}function c(t){r.forEach((e=>e(t)))}const h=[];function l(t){h.push(t)}function d(t){h.forEach((e=>e(t)))}},107:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(9),o=n(3),c=n(0),h=n(4);class l extends o.a{constructor(){super(Object(c.f)(l.getDefaults(),arguments,["volume"])),this.name="Volume";const t=Object(c.f)(l.getDefaults(),arguments,["volume"]);this.input=this.output=new r.a({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Object(h.b)(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(o.a.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}},114:function(t,e,n){"use strict";n.d(e,"c",(function(){return _.a})),n.d(e,"a",(function(){return y.a})),n.d(e,"b",(function(){return y.b})),n.d(e,"e",(function(){return r.c})),n.d(e,"d",(function(){return P}));var r=n(32),o=(n(223),n(205),n(216),n(19)),c=n(0),h=n(4),l=n(3);l.a;var d=n(9),m=(n(20),n(126),n(58));var f=n(175),_=(n(100),n(256),n(121)),v=(n(48),n(60),n(68)),T=n(85),x=n(102);class O extends v.a{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new T.a,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,time){return this._events.add({callback:t,time:this.toSeconds(time)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Object(x.d)((t=>{t.draw=new O({context:t})})),Object(x.c)((t=>{t.draw.dispose()}));n(174),n(289),n(127),n(5),n(28),n(8),n(476),n(478);var y=n(475);n(477);v.a;v.a;n(54);n(89),n(292),n(12);l.a;l.a;n(71);class k extends l.a{constructor(){super(Object.assign(Object(c.f)(k.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=Object(c.f)(k.getDefaults(),arguments,["pan"]);this.pan=new o.a({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Object(h.b)(this,"pan")}static getDefaults(){return Object.assign(l.a.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}n(221),n(291);l.a;n(295);var w=n(268),j=(n(479),n(131));const A="bit-crusher";Object(j.c)(A,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");w.a;n(86);l.a;l.a;l.a;l.a;n(149),n(36),n(218),n(59),n(217);n(220);n(120),n(224);n(155);n(150);l.a;l.a;l.a;l.a;class S extends l.a{constructor(){super(Object(c.f)(S.getDefaults(),arguments,["solo"])),this.name="Solo";const t=Object(c.f)(S.getDefaults(),arguments,["solo"]);this.input=this.output=new d.a({context:this.context}),S._allSolos.has(this.context)||S._allSolos.set(this.context,new Set),S._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(l.a.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),S._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){S._soloed.has(this.context)||S._soloed.set(this.context,new Set),S._soloed.get(this.context).add(this)}_removeSolo(){S._soloed.has(this.context)&&S._soloed.get(this.context).delete(this)}_isSoloed(){return S._soloed.has(this.context)&&S._soloed.get(this.context).has(this)}_noSolos(){return!S._soloed.has(this.context)||S._soloed.has(this.context)&&0===S._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),S._allSolos.get(this.context).delete(this),this._removeSolo(),this}}S._allSolos=new Map,S._soloed=new Map;var C=n(107);class V extends l.a{constructor(){super(Object(c.f)(V.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=Object(c.f)(V.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new k({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new C.a({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Object(h.b)(this,["pan","volume"])}static getDefaults(){return Object.assign(l.a.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class D extends l.a{constructor(){super(Object(c.f)(D.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=Object(c.f)(D.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new S({solo:t.solo,context:this.context}),this._panVol=this.output=new V({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Object(h.b)(this,["pan","volume"])}static getDefaults(){return Object.assign(l.a.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return D.buses.has(t)||D.buses.set(t,new d.a({context:this.context})),D.buses.get(t)}send(t,e=0){const n=this._getBus(t),r=new d.a({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(n),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}D.buses=new Map;l.a;l.a;class M extends l.a{constructor(){super(...arguments),this.name="Listener",this.positionX=new o.a({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new o.a({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new o.a({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new o.a({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new o.a({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new o.a({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new o.a({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new o.a({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new o.a({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(l.a.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Object(x.d)((t=>{t.listener=new M({context:t})})),Object(x.c)((t=>{t.listener.dispose()}));l.a;n(88);l.a;l.a;n(293);l.a;l.a;l.a;l.a;n(177),n(83),n(261);l.a;l.a;n(260),n(202);var R=n(128);const P=Object(r.a)().transport;Object(r.a)().destination,Object(r.a)().destination;Object(r.a)().listener;Object(r.a)().draw;Object(r.a)();m.a,f.a,R.a},121:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return m}));var r=n(32),o=n(28),c=n(93),h=n(5);class l extends c.a{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),r="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,q,s)=>{let e=0;return t&&"0"!==t&&(e+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),q&&"0"!==q&&(e+=this._beatsToUnits(parseFloat(q))),s&&"0"!==s&&(e+=this._beatsToUnits(parseFloat(s)/4)),e},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof l&&this.fromType(this._val),Object(h.i)(this._val))return this._noArg();if(Object(h.h)(this._val)&&Object(h.i)(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Object(h.g)(this._val)){let t=0;for(const e in this._val)if(Object(h.c)(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Object(h.c)(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Object(h.h)(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class d extends l{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new d(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),r=this.valueOf();return r+(Math.round(r/n)*n-r)*e}toNotation(){const time=this.toSeconds(),t=["1m"];for(let e=1;e<9;e++){const n=Math.pow(2,e);t.push(n+"n."),t.push(n+"n"),t.push(n+"t")}t.push("0");let e=t[0],n=new d(this.context,t[0]).toSeconds();return t.forEach((t=>{const r=new d(this.context,t).toSeconds();Math.abs(r-time)<Math.abs(n-time)&&(e=t,n=r)})),e}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const o=r.toString();o.length>3&&(r=parseFloat(parseFloat(o).toFixed(3)));return[n,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Object(o.b)(this.toFrequency())}_now(){return this.context.now()}}function m(t,e){return new d(Object(r.a)(),t,e)}},126:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(20),o=n(88),c=n(205),h=n(40),l=n(58);class d extends c.a{constructor(){super({clockSource:"offline",context:Object(h.e)(arguments[0])?arguments[0]:Object(o.c)(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Object(h.e)(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Object(h.e)(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return Object(r.a)(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return Object(r.a)(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new l.a(e)}))}close(){return Promise.resolve()}}},127:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(85),o=n(8);class c extends r.a{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(time){const t=this.get(time);return null!==t?t.state:this._initial}setStateAtTime(t,time,e){return Object(o.c)(time,0),this.add(Object.assign({},e,{state:t,time:time})),this}getLastState(t,time){for(let i=this._search(time);i>=0;i--){const e=this._timeline[i];if(e.state===t)return e}}getNextState(t,time){const e=this._search(time);if(-1!==e)for(let i=e;i<this._timeline.length;i++){const e=this._timeline[i];if(e.state===t)return e}}}},131:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return h}));const r=new Set;function o(t){r.add(t)}function c(t,e){const n=`registerProcessor("${t}", ${e})`;r.add(n)}function h(){return Array.from(r).join("\n")}},174:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(93),o=n(5);class c extends r.a{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Object(o.i)(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...r)=>{e(...r),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Object(o.i)(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Object(o.i)(e))this._events[t]=[];else{const n=this._events[t];for(let i=n.length-1;i>=0;i--)n[i]===e&&n.splice(i,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let i=0,t=n.length;i<t;i++)n[i].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(c.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}},175:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(93),o=n(0),c=n(4),h=n(5),l=n(58),d=n(8);class m extends r.a{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Object(o.f)(m.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:c.a,onload:c.a,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Object(d.a)(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=c.a,r=c.a){return Object(h.h)(e)?this._buffers.set(t.toString(),new l.a(this.baseUrl+e,n,r)):this._buffers.set(t.toString(),new l.a(e,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}},177:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(9),o=n(0),c=n(83);class h extends c.a{constructor(){super(Object(o.f)(h.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new r.a({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}},19:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(28),o=n(40),c=n(0),h=n(85),l=n(5),d=n(68),m=n(54),f=n(8);class _ extends d.a{constructor(){super(Object(c.f)(_.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=Object(c.f)(_.getDefaults(),arguments,["param","units","convert"]);for(Object(f.a)(Object(l.c)(t.param)&&(Object(o.d)(t.param)||t.param instanceof _),"param must be an AudioParam");!Object(o.d)(t.param);)t.param=t.param._param;this._swappable=!!Object(l.c)(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new h.a(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Object(l.c)(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(d.a.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Object(l.c)(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Object(l.c)(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Object(l.c)(this.maxValue)&&Object(l.c)(this.minValue)&&Object(f.c)(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Object(r.a)(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Object(r.d)(t):t}setValueAtTime(t,time){const e=this.toSeconds(time),n=this._fromType(t);return Object(f.a)(isFinite(n)&&isFinite(e),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(time)}`),this._assertRange(n),this.log(this.units,"setValueAtTime",t,e),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}getValueAtTime(time){const t=Math.max(this.toSeconds(time),0),e=this._events.getAfter(t),n=this._events.get(t);let r=this._initialValue;if(null===n)r=this._initialValue;else if("setTargetAtTime"!==n.type||null!==e&&"setValueAtTime"!==e.type)if(null===e)r=n.value;else if("linearRampToValueAtTime"===e.type||"exponentialRampToValueAtTime"===e.type){let o=n.value;if("setTargetAtTime"===n.type){const t=this._events.getBefore(n.time);o=null===t?this._initialValue:t.value}r="linearRampToValueAtTime"===e.type?this._linearInterpolate(n.time,o,e.time,e.value,t):this._exponentialInterpolate(n.time,o,e.time,e.value,t)}else r=n.value;else{const e=this._events.getBefore(n.time);let o;o=null===e?this._initialValue:e.value,"setTargetAtTime"===n.type&&(r=this._exponentialApproach(n.time,o,n.value,n.constant,t))}return this._toType(r)}setRampPoint(time){time=this.toSeconds(time);let t=this.getValueAtTime(time);return this.cancelAndHoldAtTime(time),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,time),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),r=this.toSeconds(e);return Object(f.a)(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=Object(m.a)(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(e);return Object(f.a)(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,time,e){time=this.toSeconds(time),e=this.toSeconds(e);const n=Math.log(e+1)/Math.log(200);return this.setTargetAtTime(t,time,n),this.cancelAndHoldAtTime(time+.9*e),this.linearRampToValueAtTime(t,time+e),this}setTargetAtTime(t,e,n){const r=this._fromType(t);Object(f.a)(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const o=this.toSeconds(e);return this._assertRange(r),Object(f.a)(isFinite(r)&&isFinite(o),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:o,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,o,n),this._param.setTargetAtTime(r,o,n),this}setValueCurveAtTime(t,e,n,r=1){n=this.toSeconds(n),e=this.toSeconds(e);const o=this._fromType(t[0])*r;this.setValueAtTime(this._toType(o),e);const c=n/(t.length-1);for(let i=1;i<t.length;i++){const n=this._fromType(t[i])*r;this.linearRampToValueAtTime(this._toType(n),e+i*c)}return this}cancelScheduledValues(time){const t=this.toSeconds(time);return Object(f.a)(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(time)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(time){const t=this.toSeconds(time),e=this._fromType(this.getValueAtTime(t));Object(f.a)(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(time)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+e);const n=this._events.get(t),r=this._events.getAfter(t);return n&&Object(m.a)(n.time,t)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(e),t):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(e),t)),this._events.add({time:t,type:"setValueAtTime",value:e}),this._param.setValueAtTime(e,t),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(param){const t=this.context.currentTime;param.setValueAtTime(this.getValueAtTime(t),t);const e=this._events.get(t);if(e&&"setTargetAtTime"===e.type){const n=this._events.getAfter(e.time),r=n?n.time:t+2,o=(r-t)/10;for(let i=t;i<r;i+=o)param.linearRampToValueAtTime(this.getValueAtTime(i),i)}return this._events.forEachAfter(this.context.currentTime,(t=>{"cancelScheduledValues"===t.type?param.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?param.setTargetAtTime(t.value,t.time,t.constant):param[t.type](t.value,t.time)})),this}setParam(param){Object(f.a)(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const input=this.input;return input.disconnect(this._param),this.apply(param),this._param=param,input.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,r,o){return n+(e-n)*Math.exp(-(o-t)/r)}_linearInterpolate(t,e,n,r,o){return e+(o-t)/(n-t)*(r-e)}_exponentialInterpolate(t,e,n,r,o){return e*Math.pow(r/e,(o-t)/(n-t))}}},205:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var r=n(20);class o{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}var c=n(40),h=n(0),l=n(85),d=n(5),m=n(88),f=n(102),_=n(216),v=n(8);class T extends _.a{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new l.a,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=Object(h.f)(T.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=Object(m.a)({latencyHint:t.latencyHint}),this._ticker=new o(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Object(f.b)(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){Object(v.a)(Object(c.b)(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(t)}createMediaElementSource(element){Object(v.a)(Object(c.b)(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(element)}createMediaStreamDestination(){Object(v.a)(Object(c.b)(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Object(v.a)(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Object(v.a)(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Object(v.a)(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Object(v.a)(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return Object(m.b)(this.rawContext,t,e)}addAudioWorkletModule(t,e){return Object(r.a)(this,void 0,void 0,(function*(){Object(v.a)(Object(d.c)(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return Object(r.a)(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Object(d.h)(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Object(c.b)(this._context)?this._context.resume():Promise.resolve()}close(){return Object(r.a)(this,void 0,void 0,(function*(){Object(c.b)(this._context)&&(yield this._context.close()),this._initialized&&Object(f.a)(this)}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,r=()=>{const o=this.now();this._timeouts.add({callback:()=>{t(),r()},id:n,time:o+e})};return r(),n}}},216:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(174);class o extends r.a{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}},220:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(3),o=n(0),c=n(224),h=n(221);class l extends r.a{constructor(){super(Object(o.f)(l.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const t=Object(o.f)(l.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new c.a({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new h.a({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(r.a.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}},221:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(3),o=n(0),c=n(9);class h extends r.a{constructor(){super(Object(o.f)(h.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const t=Object(o.f)(h.getDefaults(),arguments,["frequency","type"]);this._frequency=t.frequency,this._type=t.type,this.input=new c.a({context:this.context}),this.output=new c.a({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(r.a.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(t),t.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let i=0;i<t;i++){const n=19980*Math.pow(i/t,2)+20;e[i]=n}const n=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,r),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}},223:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var r=n(68),o=n(0),c=n(174),h=n(4),l=n(127),d=n(85),m=n(5),f=n(12),_=n(19);class v extends _.a{constructor(){super(Object(o.f)(v.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new d.a(1/0),this._multiplier=1;const t=Object(o.f)(v.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(_.a.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,time,e){time=this.toSeconds(time),this.setRampPoint(time);const n=this._fromType(t),r=this._events.get(time),o=Math.round(Math.max(1/e,1));for(let i=0;i<=o;i++){const t=e*i+time,o=this._exponentialApproach(r.time,r.value,n,e,t);this.linearRampToValueAtTime(this._toType(o),t)}return this}setValueAtTime(t,time){const e=this.toSeconds(time);super.setValueAtTime(t,time);const n=this._events.get(e),r=this._events.previousEvent(n),o=this._getTicksUntilEvent(r,e);return n.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,time){const e=this.toSeconds(time);super.linearRampToValueAtTime(t,time);const n=this._events.get(e),r=this._events.previousEvent(n),o=this._getTicksUntilEvent(r,e);return n.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,time){time=this.toSeconds(time);const e=this._fromType(t),n=this._events.get(time),r=Math.round(Math.max(10*(time-n.time),1)),o=(time-n.time)/r;for(let i=0;i<=r;i++){const t=o*i+n.time,r=this._exponentialInterpolate(n.time,n.value,time,e,t);this.linearRampToValueAtTime(this._toType(r),t)}return this}_getTicksUntilEvent(t,time){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Object(m.i)(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const e=this._fromType(this.getValueAtTime(t.time));let n=this._fromType(this.getValueAtTime(time));const r=this._events.get(time);return r&&r.time===time&&"setValueAtTime"===r.type&&(n=this._fromType(this.getValueAtTime(time-this.sampleTime))),.5*(time-t.time)*(e+n)+t.ticks}getTicksAtTime(time){const t=this.toSeconds(time),e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)}getDurationOfTicks(t,time){const e=this.toSeconds(time),n=this.getTicksAtTime(time);return this.getTimeOfTick(n+t)-e}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const r=this._fromType(this.getValueAtTime(e.time)),o=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-e.time),c=Math.sqrt(Math.pow(r,2)-2*o*(e.ticks-t)),h=(-r+c)/o,l=(-r-c)/o;return(h>0?h:l)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),r=this.toSeconds(t),o=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-o}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class T extends f.a{constructor(){super(Object(o.f)(T.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=Object(o.f)(T.getDefaults(),arguments,["value"]);this.input=this._param=new v({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(f.a.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,time){return this._param.getDurationOfTicks(t,time)}getTicksAtTime(time){return this._param.getTicksAtTime(time)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}var x=n(54);class O extends r.a{constructor(){super(Object(o.f)(O.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new l.a,this._tickOffset=new d.a;const t=Object(o.f)(O.getDefaults(),arguments,["frequency"]);this.frequency=new T({context:this.context,units:t.units,value:t.frequency}),Object(h.b)(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},r.a.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(time,t){const e=this.toSeconds(time);return"started"!==this._state.getValueAtTime(e)&&(this._state.setStateAtTime("started",e),Object(m.c)(t)&&this.setTicksAtTime(t,e)),this}stop(time){const t=this.toSeconds(time);if("stopped"===this._state.getValueAtTime(t)){const e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(time){const t=this.toSeconds(time);return"started"===this._state.getValueAtTime(t)&&this._state.setStateAtTime("paused",t),this}cancel(time){return time=this.toSeconds(time),this._state.cancel(time),this._tickOffset.cancel(time),this}getTicksAtTime(time){const t=this.toSeconds(time),e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let r=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(o=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),r=t})),this._state.remove(n),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(s){const t=this.now(),e=this.frequency.timeToTicks(s,t);this.setTicksAtTime(e,t)}getSecondsAtTime(time){time=this.toSeconds(time);const t=this._state.getLastState("stopped",time),e={state:"paused",time:time};this._state.add(e);let n=t,r=0;return this._state.forEachBetween(t.time,time+this.sampleTime,(t=>{let e=n.time;const o=this._tickOffset.get(t.time);o&&o.time>=n.time&&(r=o.seconds,e=o.time),"started"===n.state&&"started"!==t.state&&(r+=t.time-e),n=t})),this._state.remove(e),r}setTicksAtTime(t,time){return time=this.toSeconds(time),this._tickOffset.cancel(time),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,time),ticks:t,time:time}),this}getStateAtTime(time){return time=this.toSeconds(time),this._state.getValueAtTime(time)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),r=this._state.get(e),o=Math.max(n.time,r.time),c=this.frequency.getTicksAtTime(o)+t-n.ticks;return this.frequency.getTimeOfTick(c)}forEachTickBetween(t,e,n){let r=this._state.get(t);this._state.forEachBetween(t,e,(e=>{r&&"started"===r.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(r.time,t),e.time-this.sampleTime,n),r=e}));let o=null;if(r&&"started"===r.state){const c=Math.max(r.time,t),h=this.frequency.getTicksAtTime(c),l=h-this.frequency.getTicksAtTime(r.time);let d=Math.ceil(l)-l;d=Object(x.a)(d,1)?0:d;let m=this.frequency.getTimeOfTick(h+d);for(;m<e;){try{n(m,Math.round(this.getTicksAtTime(m)))}catch(t){o=t;break}m+=this.frequency.getDurationOfTicks(1,m)}}if(o)throw o;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}var y=n(8);class k extends r.a{constructor(){super(Object(o.f)(k.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=h.a,this._lastUpdate=0,this._state=new l.a("stopped"),this._boundLoop=this._loop.bind(this);const t=Object(o.f)(k.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new O({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Object(h.b)(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(r.a.getDefaults(),{callback:h.a,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(time,t){Object(y.b)(this.context);const e=this.toSeconds(time);return this.log("start",e),"started"!==this._state.getValueAtTime(e)&&(this._state.setStateAtTime("started",e),this._tickSource.start(e,t),e<this._lastUpdate&&this.emit("start",e,t)),this}stop(time){const t=this.toSeconds(time);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(time){const t=this.toSeconds(time);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(s){this._tickSource.seconds=s}getSecondsAtTime(time){return this._tickSource.getSecondsAtTime(time)}setTicksAtTime(t,time){return this._tickSource.setTicksAtTime(t,time),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(time){return this._tickSource.getTicksAtTime(time)}nextTickTime(t,e){const n=this.toSeconds(e),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((time,t)=>{this.callback(time,t)})))}getStateAtTime(time){const t=this.toSeconds(time);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}c.a.mixin(k)},224:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(9),o=n(19),c=n(3),h=n(0),l=n(4),d=n(268),m=(n(479),n(131));Object(m.a)("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const f="feedback-comb-filter";Object(m.c)(f,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class _ extends d.a{constructor(){super(Object(h.f)(_.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const t=Object(h.f)(_.getDefaults(),arguments,["delayTime","resonance"]);this.input=new r.a({context:this.context}),this.output=new r.a({context:this.context}),this.delayTime=new o.a({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new o.a({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Object(l.b)(this,["resonance","delayTime"])}_audioWorkletName(){return f}static getDefaults(){return Object.assign(c.a.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){Object(c.c)(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}},256:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(32);var r=n(28),o=n(100);class c extends o.a{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Object(r.b)(super._frequencyToUnits(t))}_ticksToUnits(t){return Object(r.b)(super._ticksToUnits(t))}_beatsToUnits(t){return Object(r.b)(super._beatsToUnits(t))}_secondsToUnits(t){return Object(r.b)(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Object(r.g)(this.toMidi())}transpose(t){return new c(this.context,this.toMidi()+t)}}},260:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(3),o=n(0),c=n(19),h=n(8);class l extends r.a{constructor(){super(Object(o.f)(l.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const t=Object(o.f)(l.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new c.a({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new c.a({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new c.a({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new c.a({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(r.a.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Object(h.a)(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let i=0;i<t;i++){const n=19980*Math.pow(i/t,2)+20;e[i]=n}const n=new Float32Array(t),r=new Float32Array(t),o=this.context.createBiquadFilter();return o.type=this.type,o.Q.value=this.Q.value,o.frequency.value=this.frequency.value,o.gain.value=this.gain.value,o.getFrequencyResponse(e,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}},261:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(0),o=n(83),c=n(120),h=n(219),l=n(8);class d extends o.a{constructor(){super(Object(r.f)(d.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=Object(r.f)(d.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new h.a({context:this.context,value:t.exponent}),this._scale=this.output=new c.a({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(o.a.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Object(l.c)(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}},268:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(3),o=n(4),c=n(131);class h extends r.a{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=o.a;const e=URL.createObjectURL(new Blob([Object(c.b)()],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e,n).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}},28:function(t,e,n){"use strict";function r(t){return Math.pow(10,t/20)}function o(t){return Math.log(t)/Math.LN10*20}function c(t){return Math.pow(2,t/12)}n.d(e,"a",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return f})),n.d(e,"g",(function(){return _}));let h=440;function l(){return h}function d(t){h=t}function m(t){return Math.round(f(t))}function f(t){return 69+12*Math.log2(t/h)}function _(t){return h*Math.pow(2,(t-69)/12)}},289:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(93),o=n(5),c=n(8);class h extends r.a{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Object(c.a)(Object(o.c)(t.time),"Events must have a time property"),Object(c.a)(Object(o.c)(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new l(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(time){if(null!==this._root){const t=[];if(this._root.search(time,t),t.length>0){let e=t[0];for(let i=1;i<t.length;i++)t[i].low>e.low&&(e=t[i]);return e.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(time,t){if(null!==this._root){const e=[];this._root.search(time,e),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachFrom(time,t){if(null!==this._root){const e=[];this._root.searchAfter(time,e),e.forEach((e=>{e.event&&t(e.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class l{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return _}));var r=n(40),o=n(5),c=n(19),h=n(68),l=n(8);class d extends h.a{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Object(o.c)(this.input)?Object(r.d)(this.input)||this.input instanceof c.a?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Object(o.c)(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Object(o.c)(t)&&(t instanceof d||Object(r.c)(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Object(l.a)(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return f(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Object(l.e)("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return _(this,t,e,n),this}chain(...t){return m(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Object(o.c)(this.input)&&(this.input instanceof d?this.input.dispose():Object(r.c)(this.input)&&this.input.disconnect()),Object(o.c)(this.output)&&(this.output instanceof d?this.output.dispose():Object(r.c)(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function m(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof d?t.connect(e):Object(r.c)(t)&&f(t,e),e)),e)}function f(t,e,n=0,h=0){for(Object(l.a)(Object(o.c)(t),"Cannot connect from undefined node"),Object(l.a)(Object(o.c)(e),"Cannot connect to undefined node"),(e instanceof d||Object(r.c)(e))&&Object(l.a)(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Object(l.a)(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof d||e instanceof c.a;)Object(o.c)(e.input)&&(e=e.input);for(;t instanceof d;)Object(o.c)(t.output)&&(t=t.output);Object(r.d)(e)?t.connect(e,n):t.connect(e,n,h)}function _(t,e,n=0,c=0){if(Object(o.c)(e))for(;e instanceof d;)e=e.input;for(;!Object(r.c)(t);)Object(o.c)(t.output)&&(t=t.output);Object(r.d)(e)?t.disconnect(e,n):Object(r.c)(e)?t.disconnect(e,n,c):t.disconnect()}},32:function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return O}));var r=n(202),o=n(88),c=n(205),h=n(20),l=n(216);class d extends l.a{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return Object(h.a)(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}var m=n(126),f=n(40);const _=new d;let v=_;function T(){return v===_&&o.d&&x(new c.a),v}function x(t){v=Object(f.b)(t)?new c.a(t):Object(f.e)(t)?new m.a(t):t}function O(){return v.resume()}if(o.e&&!o.e.TONE_SILENCE_LOGGING){let t="v";"dev"===r.a&&(t="");r.a}},4:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return h}));var r=n(5);function o(t,e){Object(r.a)(e)?e.forEach((e=>o(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function c(t,e){Object(r.a)(e)?e.forEach((e=>c(t,e))):Object.defineProperty(t,e,{writable:!0})}const h=()=>{}},40:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return h})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d}));var r=n(132);function o(t){return Object(r.f)(t)}function c(t){return Object(r.e)(t)}function h(t){return Object(r.g)(t)}function l(t){return Object(r.d)(t)}function d(t){return t instanceof AudioBuffer}},477:function(t,e,n){"use strict";var r=n(121),o=n(85),c=n(93);class h extends c.a{constructor(t){super(),this.name="TimelineValue",this._timeline=new o.a({memory:10}),this._initialValue=t}set(t,time){return this._timeline.add({value:t,time:time}),this}get(time){const t=this._timeline.get(time);return t?t.value:this._initialValue}}var l=n(102),d=n(9),m=n(68),f=n(48),_=n(60),v=n(0),T=n(174),x=n(4),O=n(289),y=n(5),k=n(223);class w{constructor(t,e){this.id=w._eventId++;const n=Object.assign(w.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:x.a,once:!1,time:0}}invoke(time){this.callback&&(this.callback(time),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}w._eventId=0;class j extends w{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(j.getDefaults(),e);this.duration=new f.a(t.context,n.duration).valueOf(),this._interval=new f.a(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},w.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(time){this._createEvents(time),super.invoke(time)}_createEvents(time){const t=this.transport.getTicksAtTime(time);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new f.a(this.context,this._nextTick).toSeconds()))}_restart(time){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(time);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new f.a(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new f.a(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class A extends m.a{constructor(){super(Object(v.f)(A.getDefaults(),arguments)),this.name="Transport",this._loop=new h(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new o.a,this._repeatedEvents=new O.a,this._syncedSignals=[],this._swingAmount=0;const t=Object(v.f)(A.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new k.a({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Object(x.b)(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(m.a.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const progress=e%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(progress*Math.PI)*this._swingAmount;t+=new f.a(this.context,2*this._swingTicks/3).toSeconds()*n}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,time){const e=new w(this,{callback:t,time:new _.a(this.context,time).toTicks()});return this._addEvent(e,this._timeline)}scheduleRepeat(t,e,n,o=1/0){const c=new j(this,{callback:t,duration:new r.b(this.context,o).toTicks(),interval:new r.b(this.context,e).toTicks(),time:new _.a(this.context,n).toTicks()});return this._addEvent(c,this._repeatedEvents)}scheduleOnce(t,time){const e=new w(this,{callback:t,once:!0,time:new _.a(this.context,time).toTicks()});return this._addEvent(e,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((time,t)=>{t=new f.a(this.context,t).toSeconds(),this.emit("start",time,t)})),this._clock.on("stop",(time=>{this.emit("stop",time)})),this._clock.on("pause",(time=>{this.emit("pause",time)}))}get state(){return this._clock.getStateAtTime(this.now())}start(time,t){let e;return Object(y.c)(t)&&(e=this.toTicks(t)),this._clock.start(time,e),this}stop(time){return this._clock.stop(time),this}pause(time){return this._clock.pause(time),this}toggle(time){return time=this.toSeconds(time),"started"!==this._clock.getStateAtTime(time)?this.start(time):this.stop(time),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Object(y.a)(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new r.b(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new r.b(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new f.a(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new f.a(this.context,e).toBarsBeatsSixteenths()}set position(progress){const t=this.toTicks(progress);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(s){const t=this.now(),e=this._clock.frequency.timeToTicks(s,t);this.ticks=e}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),time=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",time),this._clock.setTicksAtTime(t,time),this.emit("start",time,this._clock.getSecondsAtTime(time))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(time){return Math.round(this._clock.getTicksAtTime(time))}getSecondsAtTime(time){return this._clock.getSecondsAtTime(time)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const r=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/r}else e=0}const n=new d.a(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let i=this._syncedSignals.length-1;i>=0;i--){const e=this._syncedSignals[i];e.signal===t&&(e.ratio.dispose(),e.signal.value=e.initial,this._syncedSignals.splice(i,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Object(x.c)(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}T.a.mixin(A),Object(l.d)((t=>{t.transport=new A({context:t})})),Object(l.c)((t=>{t.transport.dispose()}))},479:function(t,e,n){"use strict";var r=n(131);Object(r.a)('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');Object(r.a)("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n")},48:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(32);var r=n(60);class o extends r.a{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}},5:function(t,e,n){"use strict";function r(t){return void 0===t}function o(t){return!r(t)}function c(t){return"function"==typeof t}function h(t){return"number"==typeof t}function l(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function d(t){return"boolean"==typeof t}function m(t){return Array.isArray(t)}function f(t){return"string"==typeof t}function _(t){return f(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}n.d(e,"i",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"h",(function(){return f})),n.d(e,"e",(function(){return _}))},54:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return l})),n.d(e,"e",(function(){return d}));const r=1e-6;function o(a,b){return a>b+r}function c(a,b){return o(a,b)||l(a,b)}function h(a,b){return a+r<b}function l(a,b){return Math.abs(a-b)<r}function d(t,e,n){return Math.max(Math.min(t,n),e)}},58:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(20),o=n(32),c=n(93),h=n(40),l=n(0),d=n(4),m=n(5),f=n(8);class _ extends c.a{constructor(){super(),this.name="ToneAudioBuffer",this.onload=d.a;const t=Object(l.f)(_.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&Object(h.a)(t.url)||t.url instanceof _?this.set(t.url):Object(m.h)(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:d.a,onload:d.a,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Object(o.a)().sampleRate}set(t){return t instanceof _?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=_.load(t).then((t=>{this.set(t),this.onload(this)}));_.downloads.push(e);try{yield e}finally{const t=_.downloads.indexOf(e);_.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Object(m.a)(t)&&t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,c=Object(o.a)(),h=c.createBuffer(n,r,c.sampleRate),l=e||1!==n?t:[t];for(let t=0;t<n;t++)h.copyToChannel(l[t],t);return this._buffer=h,this}toMono(t){if(Object(m.f)(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let i=0;i<e.length;i++)t[i]+=e[i]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Object(m.f)(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);Object(f.a)(n<r,"The start time must be less than the end time");const c=r-n,h=Object(o.a)().createBuffer(this.numberOfChannels,c,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)h.copyToChannel(this.getChannelData(t).subarray(n,r),t);return new _(h)}_reverse(){if(this.loaded)for(let i=0;i<this.numberOfChannels;i++)this.getChannelData(i).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new _).fromArray(t)}static fromUrl(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=new _;return yield e.load(t)}))}static load(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let r=n[0];for(const t of n)if(_.supportsType(t)){r=t;break}t=t.replace(e[0],r)}const n=""===_.baseUrl||_.baseUrl.endsWith("/")?_.baseUrl:_.baseUrl+"/",r=yield fetch(n+t);if(!r.ok)throw new Error(`could not load url: ${t}`);const c=yield r.arrayBuffer();return yield Object(o.a)().decodeAudioData(c)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return Object(r.a)(this,void 0,void 0,(function*(){for(yield Promise.resolve();_.downloads.length;)yield _.downloads[0]}))}}_.baseUrl="",_.downloads=[]},60:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n(32);var r=n(121);class o extends r.b{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}},68:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(32),o=n(93),c=n(100),h=n(121),l=n(60),d=n(0),m=n(5);class f extends o.a{constructor(){super();const t=Object(d.f)(f.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Object(r.a)()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(time){return new h.b(this.context,time).toSeconds()}toFrequency(t){return new c.a(this.context,t).toFrequency()}toTicks(time){return new l.a(this.context,time).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Object(m.i)(t[n])&&delete e[n]})),e}get(){const t=Object(d.d)(this);return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Object(m.c)(n)&&Object(m.c)(n.value)&&Object(m.c)(n.setValueAtTime)?t[e]=n.value:n instanceof f?t[e]=n._getPartialProperties(t[e]):Object(m.a)(n)||Object(m.f)(n)||Object(m.h)(n)||Object(m.b)(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Object(m.c)(this[e])&&(this[e]&&Object(m.c)(this[e].value)&&Object(m.c)(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof f?this[e].set(t[e]):this[e]=t[e])})),this}}},712:function(t,e,n){"use strict";var r=n(107),o=n(0),c=n(102),h=n(9),l=n(3);class d extends l.a{constructor(){super(Object(o.f)(d.getDefaults(),arguments)),this.name="Destination",this.input=new r.a({context:this.context}),this.output=new h.a({context:this.context}),this.volume=this.input.volume;const t=Object(o.f)(d.getDefaults(),arguments);Object(l.c)(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(l.a.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Object(l.c)(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Object(c.d)((t=>{t.destination=new d({context:t})})),Object(c.c)((t=>{t.destination.dispose()}))},8:function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e)}function o(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function c(t){t.isOffline||"running"===t.state||d('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return d}));let h=console;function l(...t){h.log(...t)}function d(...t){h.warn(...t)}},83:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(20),o=n(3),c=n(0),h=n(5),l=n(12),d=n(126),m=n(8),f=n(95);class _ extends o.a{constructor(){super(Object(c.f)(_.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new l.a({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=Object(c.f)(_.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(o.a.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Object(h.h)(t))return t;{let n;for(n in v)if(v[n][e]===t)return n;return t}}_setCurve(t,e,n){if(Object(h.h)(n)&&Reflect.has(v,n)){const r=v[n];Object(h.g)(r)?"_decayCurve"!==t&&(this[t]=r[e]):this[t]=r}else{if(!Object(h.a)(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Object(m.a)(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(time,t=1){this.log("triggerAttack",time,t),time=this.toSeconds(time);let e=this.toSeconds(this.attack);const n=this.toSeconds(this.decay),r=this.getValueAtTime(time);if(r>0){e=(1-r)/(1/e)}if(e<this.sampleTime)this._sig.cancelScheduledValues(time),this._sig.setValueAtTime(t,time);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,e,time);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,e,time);else{this._sig.cancelAndHoldAtTime(time);let n=this._attackCurve;for(let i=1;i<n.length;i++)if(n[i-1]<=r&&r<=n[i]){n=this._attackCurve.slice(i),n[0]=r;break}this._sig.setValueCurveAtTime(n,time,e,t)}if(n&&this.sustain<1){const r=t*this.sustain,o=time+e;this.log("decay",o),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,n+o):this._sig.exponentialApproachValueAtTime(r,o,n)}return this}triggerRelease(time){this.log("triggerRelease",time),time=this.toSeconds(time);const t=this.getValueAtTime(time);if(t>0){const e=this.toSeconds(this.release);e<this.sampleTime?this._sig.setValueAtTime(0,time):"linear"===this._releaseCurve?this._sig.linearRampTo(0,e,time):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,e,time):(Object(m.a)(Object(h.a)(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(time),this._sig.setValueCurveAtTime(this._releaseCurve,time,e,t))}return this}getValueAtTime(time){return this._sig.getValueAtTime(time)}triggerAttackRelease(t,time,e=1){return time=this.toSeconds(time),this.triggerAttack(time,e),this.triggerRelease(time+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return Object(l.b)(this,t,e,n),this}asArray(t=1024){return Object(r.a)(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new d.a(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),o=r+this.toSeconds(this.release),c=.1*o,h=o+c,l=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/h,decay:e*this.toSeconds(this.decay)/h,release:e*this.toSeconds(this.release)/h,context:n}));l._sig.toDestination(),l.triggerAttackRelease(e*(r+c)/h,0);return(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}Object(r.b)([Object(f.b)(0)],_.prototype,"attack",void 0),Object(r.b)([Object(f.b)(0)],_.prototype,"decay",void 0),Object(r.b)([Object(f.a)(0,1)],_.prototype,"sustain",void 0),Object(r.b)([Object(f.b)(0)],_.prototype,"release",void 0);const v=(()=>{const t=128;let i,e;const n=[];for(i=0;i<t;i++)n[i]=Math.sin(i/127*(Math.PI/2));const r=[];for(i=0;i<127;i++){e=i/127;const t=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;r[i]=t/10+.83*e}r[127]=1;const o=[];for(i=0;i<t;i++)o[i]=Math.ceil(i/127*5)/5;const c=[];for(i=0;i<t;i++)e=i/127,c[i]=.5*(1-Math.cos(Math.PI*e));const h=[];for(i=0;i<t;i++){e=i/127;const t=4*Math.pow(e,3)+.2,n=Math.cos(t*Math.PI*2*e);h[i]=Math.abs(n*(1-e))}function l(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:l(h),Out:h},cosine:{In:n,Out:(d=n,d.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:c,Out:l(c)},step:{In:o,Out:l(o)}};var d})()},85:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(93),o=n(0),c=n(8),h=n(54);class l extends r.a{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Object(o.f)(l.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Object(c.a)(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Object(c.a)(Object(h.c)(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(time,param="time"){const t=this._search(time,param);return-1!==t?this._timeline[t]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(time,param="time"){const t=this._search(time,param);return t+1<this._timeline.length?this._timeline[t+1]:null}getBefore(time){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<time)return this._timeline[t-1];const e=this._search(time);return e-1>=0?this._timeline[e-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Object(h.a)(this._timeline[e].time,t)){for(let i=e;i>=0&&Object(h.a)(this._timeline[i].time,t);i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Object(h.c)(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(time){const t=this._search(time);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(time,param="time"){if(0===this._timeline.length)return-1;let t=0;const e=this._timeline.length;let n=e;if(e>0&&this._timeline[e-1][param]<=time)return e-1;for(;t<n;){let e=Math.floor(t+(n-t)/2);const r=this._timeline[e],o=this._timeline[e+1];if(Object(h.a)(r[param],time)){for(let i=e;i<this._timeline.length;i++){const t=this._timeline[i];if(!Object(h.a)(t[param],time))break;e=i}return e}if(Object(h.d)(r[param],time)&&Object(h.b)(o[param],time))return e;Object(h.b)(r[param],time)?n=e:t=e+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(time,t){const e=this._search(time);return-1!==e&&this._iterate(t,0,e),this}forEachAfter(time,t){const e=this._search(time);return this._iterate(t,e+1),this}forEachBetween(t,e,n){let r=this._search(t),o=this._search(e);return-1!==r&&-1!==o?(this._timeline[r].time!==t&&(r+=1),this._timeline[o].time===e&&(o-=1),this._iterate(n,r,o)):-1===r&&this._iterate(n,0,o),this}forEachFrom(time,t){let e=this._search(time);for(;e>=0&&this._timeline[e].time>=time;)e--;return this._iterate(t,e+1),this}forEachAtTime(time,t){const e=this._search(time);if(-1!==e&&Object(h.a)(this._timeline[e].time,time)){let n=e;for(let i=e;i>=0&&Object(h.a)(this._timeline[i].time,time);i--)n=i;this._iterate((e=>{t(e)}),n,e)}return this}dispose(){return super.dispose(),this._timeline=[],this}}},88:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return f}));var r=n(132),o=n(8),c=n(5);function h(t){return new r.a(t)}function l(t,e,n){return new r.c(t,e,n)}const d="object"==typeof self?self:null,m=d&&(d.hasOwnProperty("AudioContext")||d.hasOwnProperty("webkitAudioContext"));function f(t,e,n){return Object(o.a)(Object(c.c)(r.b),"This node only works in a secure context (https or localhost)"),new r.b(t,e,n)}},89:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var r=n(9),o=n(3),c=n(0),h=n(4),l=n(5),d=n(12),m=n(8),f=n(260);class _ extends o.a{constructor(){super(Object(c.f)(_.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new r.a({context:this.context}),this.output=new r.a({context:this.context}),this._filters=[];const t=Object(c.f)(_.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new d.a({context:this.context,units:"positive",value:t.Q}),this.frequency=new d.a({context:this.context,units:"frequency",value:t.frequency}),this.detune=new d.a({context:this.context,units:"cents",value:t.detune}),this.gain=new d.a({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Object(h.b)(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(o.a.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Object(m.a)(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach((filter=>filter.type=t))}get rolloff(){return this._rolloff}set rolloff(t){const e=Object(l.f)(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let r=n.indexOf(e);Object(m.a)(-1!==r,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((filter=>filter.disconnect())),this._filters=new Array(r);for(let t=0;t<r;t++){const filter=new f.a({context:this.context});filter.type=this._type,this.frequency.connect(filter.frequency),this.detune.connect(filter.detune),this.Q.connect(filter.Q),this.gain.connect(filter.gain),this._filters[t]=filter}this._internalChannels=this._filters,Object(o.c)(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new f.a({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((()=>1));return this._filters.forEach((()=>{e.getFrequencyResponse(t).forEach(((t,i)=>n[i]*=t))})),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((filter=>{filter.dispose()})),Object(h.c)(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(19),o=n(0),c=n(4),h=n(3);class l extends h.a{constructor(){super(Object(o.f)(l.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=Object(o.f)(l.getDefaults(),arguments,["gain","units"]);this.gain=new r.a({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Object(c.b)(this,"gain")}static getDefaults(){return Object.assign(h.a.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}},93:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(202),o=n(88),c=n(8);class h{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||o.e&&this.toString()===o.e.TONE_DEBUG_CLASS)&&Object(c.d)(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}h.version=r.a},95:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c}));var r=n(8);function o(t,e=1/0){const n=new WeakMap;return function(o,c){Reflect.defineProperty(o,c,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(o){Object(r.c)(o,t,e),n.set(this,o)}})}}function c(t,e=1/0){const n=new WeakMap;return function(o,c){Reflect.defineProperty(o,c,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(o){Object(r.c)(this.toSeconds(o),t,e),n.set(this,o)}})}}}}]);